{"version":3,"sources":["@wordpress/edit-site/src/components/block-editor/index.js"],"names":["BlockEditor","_settings","settings","canUserCreateMedia","select","_canUserCreateMedia","canUser","mediaUpload","onError","rest","wpAllowedMimeTypes","allowedMimeTypes","message","content","_setContent","initialBlocks","parsedContent","length","undefined","blocks","setBlocks","setContent","nextBlocks","ButtonBlockerAppender"],"mappings":";;;;;;;;;AAIA;;;;;;;;AADA;;AAEA;;AACA;;AACA;;AACA;;AAaA;;AArBA;;;;AAkBA;;;AAKe,SAASA,WAAT,OAAgD;AAAA,MAAdC,SAAc,QAAxBC,QAAwB;AAC9D,MAAMC,kBAAkB,GAAG,qBAAW,UAAEC,MAAF,EAAc;AACnD,QAAMC,mBAAmB,GAAGD,MAAM,CAAE,MAAF,CAAN,CAAiBE,OAAjB,CAA0B,QAA1B,EAAoC,OAApC,CAA5B;;AACA,WAAOD,mBAAmB,IAAIA,mBAAmB,KAAK,KAAtD;AACA,GAH0B,EAGxB,EAHwB,CAA3B;AAIA,MAAMH,QAAQ,GAAG,sBAAS,YAAM;AAC/B,QAAK,CAAEC,kBAAP,EAA4B;AAC3B,aAAOF,SAAP;AACA;;AACD,2CACIA,SADJ;AAECM,MAAAA,WAFD,8BAEqC;AAAA,YAArBC,QAAqB,SAArBA,OAAqB;AAAA,YAATC,IAAS;AACnC;AACCC,UAAAA,kBAAkB,EAAET,SAAS,CAACU,gBAD/B;AAECH,UAAAA,OAAO,EAAE;AAAA,gBAAII,OAAJ,SAAIA,OAAJ;AAAA,mBAAmBJ,QAAO,CAAEI,OAAF,CAA1B;AAAA;AAFV,WAGIH,IAHJ;AAKA;AARF;AAUA,GAdgB,EAcd,CAAEN,kBAAF,EAAsBF,SAAtB,CAdc,CAAjB;;AAL8D,uBAoB7B,6BAChC,UADgC,EAEhC,aAFgC,EAGhC,SAHgC,CApB6B;AAAA;AAAA,MAoBtDY,OApBsD;AAAA,MAoB7CC,WApB6C;;AAyB9D,MAAMC,aAAa,GAAG,sBAAS,YAAM;AACpC,QAAK,OAAOF,OAAP,KAAmB,UAAxB,EAAqC;AACpC,UAAMG,aAAa,GAAG,mBAAOH,OAAP,CAAtB;AACA,aAAOG,aAAa,CAACC,MAAd,GAAuBD,aAAvB,GAAuCE,SAA9C;AACA;AACD,GALqB,EAKnB,EALmB,CAAtB;;AAzB8D,wBA+BhB,6BAC7C,UAD6C,EAE7C,aAF6C,EAG7C,QAH6C,CA/BgB;AAAA;AAAA;AAAA,MA+BtDC,MA/BsD,iCA+B7CJ,aA/B6C;AAAA,MA+B9BK,SA/B8B;;AAoC9D,MAAMC,UAAU,GAAG,0BAAa,UAAEC,UAAF,EAAkB;AACjDF,IAAAA,SAAS,CAAEE,UAAF,CAAT;;AACAR,IAAAA,WAAW,CAAE,uBAAWQ,UAAX,CAAF,CAAX;AACA,GAHkB,EAGhB,EAHgB,CAAnB;AAIA,SACC,4BAAC,gCAAD;AACC,IAAA,QAAQ,EAAGpB,QADZ;AAEC,IAAA,KAAK,EAAGiB,MAFT;AAGC,IAAA,OAAO,EAAGC,SAHX;AAIC,IAAA,QAAQ,EAAGC;AAJZ,KAMC,4BAAC,yCAAD,OAND,EAOC,4BAAC,gBAAD,CAAS,aAAT,QACC,4BAAC,2BAAD,OADD,CAPD,EAUC;AAAK,IAAA,SAAS,EAAC;AAAf,KACC,4BAAC,wBAAD,QACC,4BAAC,0BAAD,QACC,4BAAC,sBAAD;AACC,IAAA,SAAS,EAAC,oCADX;AAEC,IAAA,cAAc,EAAGE;AAFlB,IADD,CADD,CADD,CAVD,CADD;AAuBA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useSelect } from '@wordpress/data';\nimport { useMemo, useCallback } from '@wordpress/element';\nimport { uploadMedia } from '@wordpress/media-utils';\nimport { useEntityProp } from '@wordpress/core-data';\nimport { parse, serialize } from '@wordpress/blocks';\nimport {\n\tBlockEditorProvider,\n\tBlockEditorKeyboardShortcuts,\n\tBlockInspector,\n\tWritingFlow,\n\tObserveTyping,\n\tBlockList,\n\tButtonBlockerAppender,\n} from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport Sidebar from '../sidebar';\n\nexport default function BlockEditor( { settings: _settings } ) {\n\tconst canUserCreateMedia = useSelect( ( select ) => {\n\t\tconst _canUserCreateMedia = select( 'core' ).canUser( 'create', 'media' );\n\t\treturn _canUserCreateMedia || _canUserCreateMedia !== false;\n\t}, [] );\n\tconst settings = useMemo( () => {\n\t\tif ( ! canUserCreateMedia ) {\n\t\t\treturn _settings;\n\t\t}\n\t\treturn {\n\t\t\t..._settings,\n\t\t\tmediaUpload( { onError, ...rest } ) {\n\t\t\t\tuploadMedia( {\n\t\t\t\t\twpAllowedMimeTypes: _settings.allowedMimeTypes,\n\t\t\t\t\tonError: ( { message } ) => onError( message ),\n\t\t\t\t\t...rest,\n\t\t\t\t} );\n\t\t\t},\n\t\t};\n\t}, [ canUserCreateMedia, _settings ] );\n\tconst [ content, _setContent ] = useEntityProp(\n\t\t'postType',\n\t\t'wp_template',\n\t\t'content'\n\t);\n\tconst initialBlocks = useMemo( () => {\n\t\tif ( typeof content !== 'function' ) {\n\t\t\tconst parsedContent = parse( content );\n\t\t\treturn parsedContent.length ? parsedContent : undefined;\n\t\t}\n\t}, [] );\n\tconst [ blocks = initialBlocks, setBlocks ] = useEntityProp(\n\t\t'postType',\n\t\t'wp_template',\n\t\t'blocks'\n\t);\n\tconst setContent = useCallback( ( nextBlocks ) => {\n\t\tsetBlocks( nextBlocks );\n\t\t_setContent( serialize( nextBlocks ) );\n\t}, [] );\n\treturn (\n\t\t<BlockEditorProvider\n\t\t\tsettings={ settings }\n\t\t\tvalue={ blocks }\n\t\t\tonInput={ setBlocks }\n\t\t\tonChange={ setContent }\n\t\t>\n\t\t\t<BlockEditorKeyboardShortcuts />\n\t\t\t<Sidebar.InspectorFill>\n\t\t\t\t<BlockInspector />\n\t\t\t</Sidebar.InspectorFill>\n\t\t\t<div className=\"editor-styles-wrapper\">\n\t\t\t\t<WritingFlow>\n\t\t\t\t\t<ObserveTyping>\n\t\t\t\t\t\t<BlockList\n\t\t\t\t\t\t\tclassName=\"edit-site-block-editor__block-list\"\n\t\t\t\t\t\t\trenderAppender={ ButtonBlockerAppender }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ObserveTyping>\n\t\t\t\t</WritingFlow>\n\t\t\t</div>\n\t\t</BlockEditorProvider>\n\t);\n}\n"]}
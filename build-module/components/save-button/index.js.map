{"version":3,"sources":["@wordpress/edit-site/src/components/save-button/index.js"],"names":["useEntityProp","useEffect","useState","useCallback","useSelect","Button","__","EntitiesSavedStates","SaveButton","setStatus","select","getEntityRecordChangesByRecord","isSavingEntityRecord","entityRecordChangesByRecord","changedKinds","Object","keys","isDirty","length","isSaving","some","changedKind","changedName","changedKey","disabled","isOpen","setIsOpen","open","bind","close","undefined"],"mappings":";;;AAAA;;;AAGA,SAASA,aAAT,QAA8B,sBAA9B;AACA,SAASC,SAAT,EAAoBC,QAApB,EAA8BC,WAA9B,QAAiD,oBAAjD;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,SAASC,MAAT,QAAuB,uBAAvB;AACA,SAASC,EAAT,QAAmB,iBAAnB;AACA,SAASC,mBAAT,QAAoC,mBAApC;AAEA,eAAe,SAASC,UAAT,GAAsB;AAAA,uBACZR,aAAa,CAAE,UAAF,EAAc,aAAd,EAA6B,QAA7B,CADD;AAAA;AAAA,MAC1BS,SAD0B,uBAEpC;;;AACAR,EAAAA,SAAS,CAAE;AAAA,WAAMQ,SAAS,CAAE,SAAF,CAAf;AAAA,GAAF,EAAgC,EAAhC,CAAT;;AAHoC,mBAKNL,SAAS,CAAE,UAAEM,MAAF,EAAc;AAAA,kBACWA,MAAM,CACtE,MADsE,CADjB;AAAA,QAC9CC,8BAD8C,WAC9CA,8BAD8C;AAAA,QACdC,oBADc,WACdA,oBADc;;AAItD,QAAMC,2BAA2B,GAAGF,8BAA8B,EAAlE;AACA,QAAMG,YAAY,GAAGC,MAAM,CAACC,IAAP,CAAaH,2BAAb,CAArB;AACA,WAAO;AACNI,MAAAA,OAAO,EAAEH,YAAY,CAACI,MAAb,GAAsB,CADzB;AAENC,MAAAA,QAAQ,EAAEL,YAAY,CAACM,IAAb,CAAmB,UAAEC,WAAF;AAAA,eAC5BN,MAAM,CAACC,IAAP,CACCH,2BAA2B,CAAEQ,WAAF,CAD5B,EAEED,IAFF,CAEQ,UAAEE,WAAF;AAAA,iBACPP,MAAM,CAACC,IAAP,CACCH,2BAA2B,CAAEQ,WAAF,CAA3B,CAA4CC,WAA5C,CADD,EAEEF,IAFF,CAEQ,UAAEG,UAAF;AAAA,mBACPX,oBAAoB,CAAES,WAAF,EAAeC,WAAf,EAA4BC,UAA5B,CADb;AAAA,WAFR,CADO;AAAA,SAFR,CAD4B;AAAA,OAAnB;AAFJ,KAAP;AAcA,GApBsC,CALH;AAAA,MAK5BN,OAL4B,cAK5BA,OAL4B;AAAA,MAKnBE,QALmB,cAKnBA,QALmB;;AA0BpC,MAAMK,QAAQ,GAAG,CAAEP,OAAF,IAAaE,QAA9B;;AA1BoC,kBA4BNjB,QAAQ,CAAE,KAAF,CA5BF;AAAA;AAAA,MA4B5BuB,MA5B4B;AAAA,MA4BpBC,SA5BoB;;AA6BpC,MAAMC,IAAI,GAAGxB,WAAW,CAAEuB,SAAS,CAACE,IAAV,CAAgB,IAAhB,EAAsB,IAAtB,CAAF,EAAgC,EAAhC,CAAxB;AACA,MAAMC,KAAK,GAAG1B,WAAW,CAAEuB,SAAS,CAACE,IAAV,CAAgB,IAAhB,EAAsB,KAAtB,CAAF,EAAiC,EAAjC,CAAzB;AACA,SACC,8BACC,cAAC,MAAD;AACC,IAAA,SAAS,MADV;AAEC,qBAAgBJ,QAFjB;AAGC,IAAA,QAAQ,EAAGA,QAHZ;AAIC,IAAA,MAAM,EAAGL,QAJV;AAKC,IAAA,OAAO,EAAGK,QAAQ,GAAGM,SAAH,GAAeH;AALlC,KAOGrB,EAAE,CAAE,QAAF,CAPL,CADD,EAUC,cAAC,mBAAD;AAAqB,IAAA,MAAM,EAAGmB,MAA9B;AAAuC,IAAA,cAAc,EAAGI;AAAxD,IAVD,CADD;AAcA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEntityProp } from '@wordpress/core-data';\nimport { useEffect, useState, useCallback } from '@wordpress/element';\nimport { useSelect } from '@wordpress/data';\nimport { Button } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { EntitiesSavedStates } from '@wordpress/editor';\n\nexport default function SaveButton() {\n\tconst [ , setStatus ] = useEntityProp( 'postType', 'wp_template', 'status' );\n\t// Publish template if not done yet.\n\tuseEffect( () => setStatus( 'publish' ), [] );\n\n\tconst { isDirty, isSaving } = useSelect( ( select ) => {\n\t\tconst { getEntityRecordChangesByRecord, isSavingEntityRecord } = select(\n\t\t\t'core'\n\t\t);\n\t\tconst entityRecordChangesByRecord = getEntityRecordChangesByRecord();\n\t\tconst changedKinds = Object.keys( entityRecordChangesByRecord );\n\t\treturn {\n\t\t\tisDirty: changedKinds.length > 0,\n\t\t\tisSaving: changedKinds.some( ( changedKind ) =>\n\t\t\t\tObject.keys(\n\t\t\t\t\tentityRecordChangesByRecord[ changedKind ]\n\t\t\t\t).some( ( changedName ) =>\n\t\t\t\t\tObject.keys(\n\t\t\t\t\t\tentityRecordChangesByRecord[ changedKind ][ changedName ]\n\t\t\t\t\t).some( ( changedKey ) =>\n\t\t\t\t\t\tisSavingEntityRecord( changedKind, changedName, changedKey )\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t),\n\t\t};\n\t} );\n\tconst disabled = ! isDirty || isSaving;\n\n\tconst [ isOpen, setIsOpen ] = useState( false );\n\tconst open = useCallback( setIsOpen.bind( null, true ), [] );\n\tconst close = useCallback( setIsOpen.bind( null, false ), [] );\n\treturn (\n\t\t<>\n\t\t\t<Button\n\t\t\t\tisPrimary\n\t\t\t\taria-disabled={ disabled }\n\t\t\t\tdisabled={ disabled }\n\t\t\t\tisBusy={ isSaving }\n\t\t\t\tonClick={ disabled ? undefined : open }\n\t\t\t>\n\t\t\t\t{ __( 'Update' ) }\n\t\t\t</Button>\n\t\t\t<EntitiesSavedStates isOpen={ isOpen } onRequestClose={ close } />\n\t\t</>\n\t);\n}\n"]}